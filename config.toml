#
# macros
#
[macros.clone]
    deps = ["git"]
    prefix = ["git", "clone"]
[macros.install__arch]
    ## Use yaourt instead of pacman
    ##prefix = ["sudo", "pacman", "-S", "--noconfirm"]
    deps = ["yaourt"]
    prefix = ["yaourt", "-S", "--noconfirm"]
[macros.install__ubuntu]
    prefix = ["sudo", "apt-get", "install", "--force-yes"]
[macros.enable]
    prefix = ["sudo", "systemctl", "enable"]

## Tasks
[tasks.git]
    rejects = [["which", "git"]]
    links = [[".gitconfig"],
            [".gitignore"]]
[tasks.git__arch]
    # Install git using pacman
    cmds = [["sudo", "pacman", "-S", "--noconfirm", "git"]]
[tasks.yaourt]
    deps = ["git"]
    rejects = [["which", "yaourt"]]
    cmds = [["git", "clone", "https://aur.archlinux.org/package-query.git"],
            ["cd", "package-query"],
            ["makepkg", "-si"],
            ["cd", ".."],
            ["git", "clone", "https://aur.archlinux.org/yaourt.git"],
            ["makepkg", "-si"],
            ["cd", ".."]]
[tasks.fish]
    rejects = [["which", "fish"]]
    cmds = [["@install", "fish"], ["chsh", "-s", "/usr/bin/fish"],
            # Install oh-my-fish
            ["curl", "-L", "http://get.oh-my.fish", "|", "fish"]]
    links = [[".config/omf"]]
[tasks.vim]
   rejects = [["which", "nvim"]]
   cmds = [["@install", "neovim"],
   # Download vim-plug
           ["curl", "-fLo", "~/.local/share/nvim/site/autoload/plug.vim",
            "--create-dirs", "\\", "https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim"]]
   links = [[".config/nvim/init.vim"]]
[tasks.audio]
    cmds = [["@install", "pulseaudio", "alsa-utils", "pavucontrol"]]
    links = [[".config/pavucontrol.ini"]]
[tasks.common]
    cmds = [["@install", "unzip"]]
    links = [[".Xresources"]]
[tasks.desktop]
    cmds = [["@install", "gimp", "keepassx2", "xf86-input-synaptics", "rofi", "mps-youtube", "kdenlive", "cmus", "smplayer", "livestreamer", "xautolock", "feh", "pcmanfm"]]
[tasks.browser]
    cmds = [["@install", "qutebrowser"]]
    links = [[".config/qutebrowser/qutebrowser.conf"],
        [".config/qutebrowser/keys.conf"]]
[tasks.redshift]
    cmds = [["@install", "redshift"]]
    #links = [[".config/redshift.conf"],
    #    [".config/redshift/hooks/brightness.sh"]]
[tasks.fonts]
    links = [[".local/share/fonts"]]
[tasks.vlc]
    cmds = [["@install", "vlc"], ["/usr/lib/vlc/vlc-cache-gen", "-f", "/usr/lib/vlc/plugins"]]
[tasks.i3]
    cmds = [["@install", "lemonbar-xft-git"]]
    links = [[".i3"]]
[tasks.ranger]
    cmds = [["@install", "ranger"]]
    links = [[".config/ranger/rc.conf"],
        [".config/ranger/rifle.conf"],
        [".config/ranger/scope.sh"]]
[tasks.dunst]
    cmds = [["@install", "dunst"]]
    links = [[".config/dunst/dunstrc"]]
[tasks.morc_menu]
    cmds = [["@aur", "morc_menu"]]
    links = [[".config/morc_menu/morc_menu_v1.conf"]]
[tasks.compton]
    cmds = [["@install", "compton"]]
    links = [[".config/compton.conf"]]
[tasks.teiler]
    cmds = [["@install", "teiler"]]
    links = [[".config/teiler/config"]]
[tasks.default]
    deps = ["common", "vim", "fish"]
[tasks.default__arch]
    deps = ["desktop", "fonts", "audio", "i3", "redshift", "ranger", "dunst", "morc_menu", "compton", "teiler", "browser"]
